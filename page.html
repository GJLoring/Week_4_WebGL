<html>

<head>
<title>Introduction to WebGL Lab</title>

<script src="vector3.js"></script>
<script src="matrix4.js"></script>

<script id="vertex-shader" type="not-javascript">
    attribute vec4 position;
    void main(){
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        gl_PointSize = 10.0;
    }
</script>

<script id="fragment-shader" type="not-javascript">
    void main(){
        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
    }
</script>

<script type="text/javascript">

    // the main variable through which we will interact with webgl
    var gl;

    // we preallocate our matrix objects here and reuse them every frame
    var viewMatrix = new Matrix4();
    var projectionMatrix = new Matrix4();

    // the shader that will be used by each piece of geometry (they could each use their own shader but in this case it will be the same)
    var shaderProgram;

    // -------------------------------------------------------------------------
    function initializeAndStartRendering() {
        initGL();

        //createShaders();
        //createTriangleGeometry();
        //createLineGridGeometry();

        updateAndRender();
    }

    // -------------------------------------------------------------------------
    // Get a valid link to the GL "context"
    function initGL(canvas) {
        var canvas = document.getElementById("webgl-canvas");

        try {
            gl = canvas.getContext("webgl");
        } catch (e) {}

        if (!gl) {
            alert("Could not initialise WebGL, sorry :-(");
        }
    }

    function createCompiledShader(shaderText, shaderType) {
        var shader = gl.createShader(shaderType);

        gl.shaderSource(shaderType, shaderText );
        gl.compileShader(shaderText);

        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
            alert(gl.getShaderInfoLog(shader));
            console.log(gl.getShaderInfoLog(shader));
            return null;
        }
        return shader;
    }

    function createShaders() {
        // Get the objects representing individual shaders

        var vertexShaderText = document.getElementById("vertex-shader").textContent;
        var vertexShader = createCompiledShader(vertexShaderText, gl.VERTEX_SHADER);

        var fragmentShaderText = document.getElementById("fragment-shader").textContent;
        var fragmentShader = createCompiledShader(fragmentShaderText, gl.FRAGMENT_SHADER);
    }


    // -------------------------------------------------------------------------
    function updateAndRender() {
        //requestAnimationFrame(render);

        gl.viewport(0, 0, 1024, 768);

        gl.clearColor(0.707, 0.707, 1, 1.0);
        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
    }

</script>

</head>


<body onload="initializeAndStartRendering();">
    <canvas id="webgl-canvas" style="border: none;" width="1024" height="768"></canvas>
</body>

</html>